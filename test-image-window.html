<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>ç”»åƒã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ãƒ†ã‚¹ãƒˆ</title>
    <style>
        body {
            margin: 0;
            padding: 20px;
            font-family: Arial, sans-serif;
            background: #f0f0f0;
        }
        
        .info {
            background: #e8f5e8;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
            border-left: 4px solid #27ae60;
        }
        
        button {
            padding: 10px 20px;
            font-size: 14px;
            background: #3498db;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            margin: 5px;
        }
        
        button:hover {
            background: #2980b9;
        }
    </style>
</head>
<body>
    <div class="info">
        <h3>ğŸ”§ ç”»åƒã‚¦ã‚£ãƒ³ãƒ‰ã‚¦è¡¨ç¤ºãƒ†ã‚¹ãƒˆ</h3>
        <p><strong>ãƒ†ã‚¹ãƒˆå†…å®¹:</strong></p>
        <ul>
            <li>SimpleDragResizeWindowã‚¯ãƒ©ã‚¹ã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ãŒæ­£ã—ãä½œæˆã•ã‚Œã‚‹ã‹</li>
            <li>èµ¤ã„ã‚¿ã‚¤ãƒˆãƒ«ãƒãƒ¼ã®ç”»åƒã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã‹</li>
            <li>Ã—ãƒœã‚¿ãƒ³ãŒå‹•ä½œã™ã‚‹ã‹</li>
        </ul>
        <button onclick="testImageWindow()">ç”»åƒã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã‚’ä½œæˆ</button>
        <button onclick="checkExistingWindow()">æ—¢å­˜ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã‚’ãƒã‚§ãƒƒã‚¯</button>
    </div>
    
    <script type="module">
        import { SimpleDragResizeWindow } from './js/simple-drag-resize.js';
        
        let testWindow = null;
        
        window.testImageWindow = function() {
            console.log('testImageWindow called');
            
            // ãƒ†ã‚¹ãƒˆç”¨ã®ç”»åƒãƒ‡ãƒ¼ã‚¿ã‚’ä½œæˆ
            const canvas = document.createElement('canvas');
            canvas.width = 300;
            canvas.height = 200;
            const ctx = canvas.getContext('2d');
            
            // ãƒ†ã‚¹ãƒˆç”»åƒã‚’æç”»
            ctx.fillStyle = '#f8f9fa';
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            ctx.fillStyle = '#333';
            ctx.font = '24px Arial';
            ctx.textAlign = 'center';
            ctx.fillText('ãƒ†ã‚¹ãƒˆç”»åƒ', canvas.width/2, canvas.height/2);
            
            const imageData = {
                url: canvas.toDataURL(),
                width: canvas.width,
                height: canvas.height
            };
            
            console.log('Creating SimpleDragResizeWindow with:', imageData);
            
            // æ—¢å­˜ã®ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ãŒã‚ã‚Œã°é–‰ã˜ã‚‹
            if (testWindow) {
                testWindow.close();
            }
            
            try {
                testWindow = new SimpleDragResizeWindow(imageData, (e) => {
                    console.log('Canvas clicked');
                }, () => {
                    console.log('Close button clicked');
                    if (testWindow) {
                        testWindow.close();
                        testWindow = null;
                    }
                });
                console.log('SimpleDragResizeWindow created successfully:', testWindow);
            } catch (error) {
                console.error('Error creating SimpleDragResizeWindow:', error);
            }
        };
        
        window.checkExistingWindow = function() {
            console.log('Current testWindow:', testWindow);
            const existingWindow = document.getElementById('imageWindow');
            console.log('Existing DOM element with id imageWindow:', existingWindow);
        };
    </script>
</body>
</html>